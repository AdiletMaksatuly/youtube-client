"use strict";(self.webpackChunkyoutube_client=self.webpackChunkyoutube_client||[]).push([[278],{7278:(pe,T,a)=>{a.r(T),a.d(T,{YoutubeModule:()=>ue});var m=a(6895),f=a(6264),e=a(4650),x=a(3095),v=a(4004),E=a(3900),y=a(262),Q=a(2843),g=a(529),A=a(5162);let I=(()=>{class t{constructor(r){this.http=r,this.SEARCH_LIST_URL=A.S.SEARCH_LIST,this.VIDEOS_LIST_URL=A.S.VIDEOS_LIST}getVideoIDs(r){const i=(new g.LE).set("type","video").set("maxResults",10).set("q",r);return this.http.get(this.SEARCH_LIST_URL,{params:i}).pipe((0,v.U)(o=>o?.items.map(c=>c.id.videoId).join(",")))}getVideos(r){return this.getVideoIDs(r).pipe((0,E.w)(i=>{const o=(new g.LE).set("part","snippet,statistics").set("id",i);return this.http.get(this.VIDEOS_LIST_URL,{params:o})})).pipe((0,v.U)(i=>i?.items),(0,y.K)(this.handleError))}getVideo(r){const i=(new g.LE).set("part","snippet,statistics").set("id",r);return this.http.get(this.VIDEOS_LIST_URL,{params:i}).pipe((0,v.U)(o=>o.items[0]),(0,y.K)(this.handleError))}handleError(r){return 0===r.status?console.error("An error occurred:",r.error):console.error(`Backend returned code ${r.status}, body was: `,r.error),(0,Q._)(()=>new Error("Something bad happened; please try again later."))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(g.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=a(4859),u=a(3546);var p=(()=>{return(t=p||(p={})).MORE_THAN_SIX_MONTHS="red",t.MORE_THAN_MONTH="yellow",t.MORE_THAN_SEVEN_DAYS="green",t.LESS_THAN_SEVEN_DAYS="blue",p;var t})();let N=(()=>{class t{constructor(r){this.el=r}ngOnInit(){if(!this.appDateHighlight)return;const r=new Date(this.appDateHighlight);this.changeBorder(r)}changeBorder(r){const c=+new Date-+r;let l;switch(!0){case c>15552e6:l=p.MORE_THAN_SIX_MONTHS;break;case c>2592e6:l=p.MORE_THAN_MONTH;break;case c>6048e5:l=p.MORE_THAN_SEVEN_DAYS;break;default:l=p.LESS_THAN_SEVEN_DAYS}this.el.nativeElement.style.borderColor=l}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["","appDateHighlight",""]],inputs:{appDateHighlight:"appDateHighlight"}}),t})();var D=a(7392);let b=(()=>{class t{constructor(){this.stats={viewCount:"",likeCount:"",commentCount:"",dislikeCount:""},this.isCentered=!1}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-video-stats"]],inputs:{stats:"stats",isCentered:"isCentered"},decls:17,vars:6,consts:[[1,"video-stats"],[1,"video-stats-item"],["aria-hidden","false","aria-label","Views count"]],template:function(r,i){1&r&&(e.TgZ(0,"ul",0)(1,"li",1)(2,"mat-icon",2),e._uU(3,"remove_red_eye"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"li",1)(6,"mat-icon",2),e._uU(7,"thumb_up"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"li",1)(10,"mat-icon",2),e._uU(11,"thumb_down"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"li",1)(14,"mat-icon",2),e._uU(15,"insert_comment"),e.qZA(),e._uU(16),e.qZA()()),2&r&&(e.ekj("video-stats-center",i.isCentered),e.xp6(4),e.hij(" ",i.stats.viewCount," "),e.xp6(4),e.hij(" ",i.stats.likeCount," "),e.xp6(4),e.hij(" ",i.stats.dislikeCount," "),e.xp6(4),e.hij(" ",i.stats.commentCount," "))},dependencies:[D.Hw],styles:[".video-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin:20px 0}.video-stats-center[_ngcontent-%COMP%]{justify-content:center}.video-stats-item[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),t})();function O(t,n){if(1&t&&(e.TgZ(0,"mat-card",1)(1,"div",2),e._UZ(2,"img",3),e.qZA(),e.TgZ(3,"mat-card-content"),e._UZ(4,"app-video-stats",4),e.TgZ(5,"mat-card-title",5),e._uU(6),e.qZA()(),e.TgZ(7,"mat-card-actions")(8,"button",6),e._uU(9,"More"),e.qZA()()()),2&t){const r=e.oxw();e.Q6J("appDateHighlight",r.video.snippet.publishedAt),e.xp6(2),e.Q6J("src",r.video.snippet.thumbnails.medium.url,e.LSH),e.xp6(2),e.Q6J("stats",r.video.statistics),e.xp6(2),e.Oqu(r.video.snippet.title),e.xp6(2),e.MGl("routerLink","detailed/",r.video.id,"")}}let F=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-item"]],inputs:{video:"video"},decls:1,vars:1,consts:[[3,"ngIf"],[1,"search-item",3,"appDateHighlight"],[1,"search-item-thumbnail"],["mat-card-image","","alt","Photo of a Shiba Inu",3,"src"],[3,"stats"],[1,"search-item-title"],["mat-raised-button","","color","accent",3,"routerLink"]],template:function(r,i){1&r&&e.YNc(0,O,10,5,"ng-template",0),2&r&&e.Q6J("ngIf",i.video)},dependencies:[m.O5,_.lW,u.a8,u.dn,u.n5,u.hq,u.G2,f.rH,N,b],styles:[".search-item[_ngcontent-%COMP%]{padding:20px;border-bottom:4px solid black}.search-item-title[_ngcontent-%COMP%]{font-size:16px;line-height:120%}.search-item-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"]}),t})(),M=(()=>{class t{transform(r,i,o){if(!r)return null;if(!i&&!o)return r;if(i&&o){const c=this.filterByString(r,i);return this.filterByString(c,o)}return this.filterByString(r,i||o)}filterByString(r,i){return r.filter(o=>o.snippet.title.toLowerCase().includes(i))}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=e.Yjl({name:"searchFilter",type:t,pure:!1}),t})();function Y(t,n){if(1&t&&(e.TgZ(0,"li",3),e._UZ(1,"app-search-item",4),e.qZA()),2&t){const r=n.$implicit;e.xp6(1),e.Q6J("video",r)}}function q(t,n){1&t&&(e.TgZ(0,"div")(1,"h1"),e._uU(2,"Not found!"),e.qZA()())}function w(t,n){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"json"),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij(" Error occurred ",e.lcZ(2,1,r.error)," ")}}let L=(()=>{class t{constructor(r){this.youtubeService=r,this.filterQuery=null,this.filterString="",this.videos=[]}ngOnInit(){this.searchQuery$.subscribe(r=>this.getVideos(r))}ngOnChanges(r){r.searchQuery||this.doSort([...this.videos])}getVideos(r){this.youtubeService.getVideos(r).subscribe(i=>(null!==this.error&&(this.error=null),i instanceof Error?this.error=i:(0===i.length&&(this.isNotFound=!0),this.videos=i)))}doSort(r){this.filterQuery?.date&&this.sortByDate(r,this.filterQuery.date),this.filterQuery?.countOfViews&&this.sortByCountOfViews(r,this.filterQuery.countOfViews)}sortByDate(r,i){this.videos=r.sort((o,c)=>{const l=new Date(o.snippet.publishedAt),h=new Date(c.snippet.publishedAt);return"ascending"===i?+h-+l:+l-+h})}sortByCountOfViews(r,i){this.videos=r.sort((o,c)=>{const l=o.statistics.viewCount,h=c.statistics.viewCount;return"ascending"===i?+l-+h:+h-+l})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(I))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-results"]],inputs:{searchQuery$:"searchQuery$",filterQuery:"filterQuery",filterString:"filterString"},features:[e.TTD],decls:6,vars:9,consts:[[1,"search-results"],["class","search-results-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"search-results-item"],[3,"video"]],template:function(r,i){1&r&&(e.TgZ(0,"ul",0),e.YNc(1,Y,2,1,"li",1),e.ALo(2,"searchFilter"),e.ALo(3,"async"),e.YNc(4,q,3,0,"div",2),e.YNc(5,w,3,3,"div",2),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,3,i.videos,e.lcZ(3,7,i.searchQuery$),i.filterString)),e.xp6(3),e.Q6J("ngIf",i.isNotFound),e.xp6(1),e.Q6J("ngIf",i.error))},dependencies:[m.sg,m.O5,F,m.Ov,m.Ts,M],styles:[".search-results[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px}"]}),t})(),P=(()=>{class t{constructor(){this.filterQuery=null,this.filterString=""}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search"]],inputs:{searchQuery$:"searchQuery$",filterQuery:"filterQuery",filterString:"filterString"},decls:3,vars:3,consts:[[1,"search"],[1,"container"],[3,"searchQuery$","filterQuery","filterString"]],template:function(r,i){1&r&&(e.TgZ(0,"section",0)(1,"div",1),e._UZ(2,"app-search-results",2),e.qZA()()),2&r&&(e.xp6(2),e.Q6J("searchQuery$",i.searchQuery$)("filterQuery",i.filterQuery)("filterString",i.filterString))},dependencies:[L]}),t})();function k(t,n){if(1&t&&(e._UZ(0,"app-search",1),e.ALo(1,"async"),e.ALo(2,"async")),2&t){const r=e.oxw();e.Q6J("searchQuery$",r.searchQuery$)("filterQuery",e.lcZ(1,3,r.filterQuery$))("filterString",e.lcZ(2,5,r.filterString$))}}let J=(()=>{class t{constructor(r){this.searchService=r,this.searchQuery$=this.searchService.getSearchQuery(),this.filterQuery$=this.searchService.getFilterQuery(),this.filterString$=this.searchService.getFilterString()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(x.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-page"]],decls:2,vars:3,consts:[[3,"searchQuery$","filterQuery","filterString",4,"ngIf"],[3,"searchQuery$","filterQuery","filterString"]],template:function(r,i){1&r&&(e.YNc(0,k,3,7,"app-search",0),e.ALo(1,"async")),2&r&&e.Q6J("ngIf",null!==e.lcZ(1,1,i.searchQuery$))},dependencies:[m.O5,P,m.Ov]}),t})();var C=a(9673),V=a(1135);let H=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-video-details"]],inputs:{video:"video"},decls:16,vars:11,consts:[[1,"video-details"],[1,"video-image"],["alt","",3,"width","height","src"],[1,"video-info"],[1,"video-info-content"],[3,"isCentered","stats"]],template:function(r,i){1&r&&(e.TgZ(0,"article",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"mat-card",3)(4,"mat-card-title"),e._uU(5),e.qZA(),e.TgZ(6,"mat-card-subtitle"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"mat-card-content",4)(10,"strong"),e._uU(11,"Description:"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA()(),e.TgZ(14,"mat-card-footer"),e._UZ(15,"app-video-stats",5),e.qZA()()()),2&r&&(e.xp6(2),e.s9C("width",i.video.snippet.thumbnails.high.width),e.s9C("height",i.video.snippet.thumbnails.high.height),e.s9C("src",i.video.snippet.thumbnails.high.url,e.LSH),e.xp6(3),e.Oqu(i.video.snippet.title),e.xp6(2),e.Oqu(e.xi3(8,8,i.video.snippet.publishedAt,"fullDate")),e.xp6(6),e.Oqu(i.video.snippet.description),e.xp6(2),e.Q6J("isCentered",!0)("stats",i.video.statistics))},dependencies:[u.a8,u.dn,u.n5,u.$j,u.rt,b,m.uU],styles:[".video-details[_ngcontent-%COMP%]{display:flex}.video-image[_ngcontent-%COMP%]{flex-basis:50%}.video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.video-info[_ngcontent-%COMP%]{flex-basis:50%;display:flex;flex-direction:column;padding:30px}.video-info-content[_ngcontent-%COMP%]{flex-grow:1}"]}),t})();function $(t,n){if(1&t&&(e._UZ(0,"app-video-details",4),e.ALo(1,"async")),2&t){const r=e.oxw();e.Q6J("video",e.lcZ(1,1,r.video$))}}function B(t,n){if(1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"json"),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij(" Error occured: ",e.lcZ(2,1,r.error)," ")}}let R=(()=>{class t{constructor(r,i,o){this.route=r,this.youtubeService=i,this.location=o,this.id=null,this.video$=new V.X(null),this.route.paramMap.subscribe(c=>{this.id=c.get(C.s.ID),this.youtubeService.getVideo(this.id).subscribe(l=>(null!==this.error&&(this.error=null),l instanceof Error?this.error=l:this.video$.next(l)))})}goBack(){this.location.back()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(f.gz),e.Y36(I),e.Y36(m.Ye))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-detailed-information-page"]],decls:10,vars:4,consts:[[1,"container"],["mat-raised-button","","color","primary","aria-label","Back to previous page",1,"back-btn",3,"click"],[3,"video",4,"ngIf"],[4,"ngIf"],[3,"video"]],template:function(r,i){1&r&&(e.TgZ(0,"main")(1,"section")(2,"div",0)(3,"button",1),e.NdJ("click",function(){return i.goBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"arrow_back"),e.qZA(),e._uU(6," Back "),e.qZA(),e.YNc(7,$,2,3,"app-video-details",2),e.ALo(8,"async"),e.YNc(9,B,3,3,"div",3),e.qZA()()()),2&r&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,2,i.video$)),e.xp6(2),e.Q6J("ngIf",i.error))},dependencies:[m.O5,D.Hw,_.lW,H,m.Ov,m.Ts],styles:[".back-btn[_ngcontent-%COMP%]{margin:20px 0}"]}),t})();var s=a(4006);const U="(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?";var d=a(9549),X=a(4144),S=a(4642);function z(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a title "),e.qZA())}function G(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," The title is too short "),e.qZA())}function W(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," The title is too long "),e.qZA())}function K(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"The description is too long "),e.qZA())}function ee(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter a link to the image "),e.qZA())}function te(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"The image link is invalid "),e.qZA())}function re(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter a link to the video "),e.qZA())}function ie(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"The video link is invalid "),e.qZA())}function ne(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter a creation date "),e.qZA())}function oe(t,n){1&t&&(e.TgZ(0,"mat-error"),e._uU(1,"The date is invalid "),e.qZA())}let ae=(()=>{class t{constructor(r){this.formBuilder=r,this.submitted=new e.vpe,this.createCardForm=this.formBuilder.group({title:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(20)]],description:["",[s.kI.maxLength(255)]],coverLink:["",[s.kI.required,s.kI.pattern(U)]],videoLink:["",[s.kI.required,s.kI.pattern(U)]],creationDate:["",[s.kI.required,t=>new Date(t.value)>new Date?{futureDate:!0}:null]]})}onSubmit(){this.createCardForm.invalid||this.submitted.emit(this.createCardForm.value)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(s.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-card-form"]],outputs:{submitted:"submitted"},decls:40,vars:13,consts:[[1,"create-card-form",3,"formGroup","ngSubmit"],["appearance","fill",1,"create-card-form-field"],["matInput","","placeholder","Title","formControlName","title"],[4,"ngIf"],["matInput","","placeholder","Description","formControlName","description"],["matInput","","placeholder","Cover link","formControlName","coverLink"],["matInput","","placeholder","Video link","formControlName","videoLink"],["matInput","","formControlName","creationDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["mat-flat-button","","type","submit","color","primary"]],template:function(r,i){if(1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(1,"h1"),e._uU(2,"Create new card"),e.qZA(),e.TgZ(3,"mat-form-field",1)(4,"mat-label"),e._uU(5,"Title"),e.qZA(),e._UZ(6,"input",2),e.YNc(7,z,2,0,"mat-error",3),e.YNc(8,G,2,0,"mat-error",3),e.YNc(9,W,2,0,"mat-error",3),e.qZA(),e.TgZ(10,"mat-form-field",1)(11,"mat-label"),e._uU(12,"Description"),e.qZA(),e._UZ(13,"input",4),e.YNc(14,K,2,0,"mat-error",3),e.qZA(),e.TgZ(15,"mat-form-field",1)(16,"mat-label"),e._uU(17,"Img cover link"),e.qZA(),e._UZ(18,"input",5),e.YNc(19,ee,2,0,"mat-error",3),e.YNc(20,te,2,0,"mat-error",3),e.qZA(),e.TgZ(21,"mat-form-field",1)(22,"mat-label"),e._uU(23,"Video link"),e.qZA(),e._UZ(24,"input",6),e.YNc(25,re,2,0,"mat-error",3),e.YNc(26,ie,2,0,"mat-error",3),e.qZA(),e.TgZ(27,"mat-form-field",1)(28,"mat-label"),e._uU(29,"Date"),e.qZA(),e._UZ(30,"input",7),e.TgZ(31,"mat-hint"),e._uU(32,"MM/DD/YYYY"),e.qZA(),e._UZ(33,"mat-datepicker-toggle",8)(34,"mat-datepicker",null,9),e.YNc(36,ne,2,0,"mat-error",3),e.YNc(37,oe,2,0,"mat-error",3),e.qZA(),e.TgZ(38,"button",10),e._uU(39,"Create card"),e.qZA()()),2&r){const o=e.MAs(35);e.Q6J("formGroup",i.createCardForm),e.xp6(7),e.Q6J("ngIf",i.createCardForm.get("title").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.createCardForm.get("title").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",i.createCardForm.get("title").hasError("maxlength")),e.xp6(5),e.Q6J("ngIf",i.createCardForm.get("description").hasError("maxlength")),e.xp6(5),e.Q6J("ngIf",i.createCardForm.get("coverLink").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.createCardForm.get("coverLink").hasError("pattern")),e.xp6(5),e.Q6J("ngIf",i.createCardForm.get("videoLink").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.createCardForm.get("videoLink").hasError("pattern")),e.xp6(4),e.Q6J("matDatepicker",o),e.xp6(3),e.Q6J("for",o),e.xp6(3),e.Q6J("ngIf",i.createCardForm.get("creationDate").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.createCardForm.get("creationDate").hasError("futureDate"))}},dependencies:[m.O5,d.TO,d.KE,d.bx,d.hX,d.R9,X.Nt,_.lW,S.Mq,S.hl,S.nW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".create-card-form[_ngcontent-%COMP%]{max-width:400px;margin:auto;padding:20px;background-color:#f1f1f1}.create-card-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();const ce=[{path:"",component:J},{path:`${C.e.DETAILED_INFORMATION_PAGE}/:${C.s.ID}`,component:R},{path:C.e.ADMIN_PAGE,component:(()=>{class t{onCreate(r){console.log("submit",r)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-admin-page"]],decls:4,vars:0,consts:[[1,"container"],[3,"submitted"]],template:function(r,i){1&r&&(e.TgZ(0,"main")(1,"section")(2,"div",0)(3,"app-create-card-form",1),e.NdJ("submitted",function(c){return i.onCreate(c)}),e.qZA()()()())},dependencies:[ae]}),t})()}];let le=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.Bz.forChild(ce),f.Bz]}),t})();var me=a(4466);let ue=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.ez,me.m,le,s.UX]}),t})()}}]);