"use strict";(self.webpackChunkyoutube_client=self.webpackChunkyoutube_client||[]).push([[866],{6866:(X,S,o)=>{o.r(S),o.d(S,{YoutubeModule:()=>q});var c=o(6895),h=o(6264),e=o(4650),D=o(3095),g=o(4004),O=o(3900),y=o(262),b=o(2843),m=o(529),C=o(5162);let _=(()=>{class i{constructor(t){this.http=t,this.SEARCH_LIST_URL=C.S.SEARCH_LIST,this.VIDEOS_LIST_URL=C.S.VIDEOS_LIST}getVideoIDs(t){const n=(new m.LE).set("type","video").set("maxResults",10).set("q",t);return this.http.get(this.SEARCH_LIST_URL,{params:n}).pipe((0,g.U)(s=>s?.items.map(l=>l.id.videoId).join(",")))}getVideos(t){return this.getVideoIDs(t).pipe((0,O.w)(n=>{const s=(new m.LE).set("part","snippet,statistics").set("id",n);return this.http.get(this.VIDEOS_LIST_URL,{params:s})})).pipe((0,g.U)(n=>n?.items),(0,y.K)(this.handleError))}getVideo(t){const n=(new m.LE).set("part","snippet,statistics").set("id",t);return this.http.get(this.VIDEOS_LIST_URL,{params:n}).pipe((0,g.U)(s=>s.items[0]),(0,y.K)(this.handleError))}handleError(t){return 0===t.status?console.error("An error occurred:",t.error):console.error(`Backend returned code ${t.status}, body was: `,t.error),(0,b._)(()=>new Error("Something bad happened; please try again later."))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(m.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var A=o(4859),u=o(3546);var p=(()=>{return(i=p||(p={})).MORE_THAN_SIX_MONTHS="red",i.MORE_THAN_MONTH="yellow",i.MORE_THAN_SEVEN_DAYS="green",i.LESS_THAN_SEVEN_DAYS="blue",p;var i})();let I=(()=>{class i{constructor(t){this.el=t}ngOnInit(){if(!this.appDateHighlight)return;const t=new Date(this.appDateHighlight);this.changeBorder(t)}changeBorder(t){const l=+new Date-+t;let a;switch(!0){case l>15552e6:a=p.MORE_THAN_SIX_MONTHS;break;case l>2592e6:a=p.MORE_THAN_MONTH;break;case l>6048e5:a=p.MORE_THAN_SEVEN_DAYS;break;default:a=p.LESS_THAN_SEVEN_DAYS}this.el.nativeElement.style.borderColor=a}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","appDateHighlight",""]],inputs:{appDateHighlight:"appDateHighlight"}}),i})();var Z=o(7392);let T=(()=>{class i{constructor(){this.stats={viewCount:"",likeCount:"",commentCount:"",dislikeCount:""},this.isCentered=!1}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-video-stats"]],inputs:{stats:"stats",isCentered:"isCentered"},decls:17,vars:6,consts:[[1,"video-stats"],[1,"video-stats-item"],["aria-hidden","false","aria-label","Views count"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0)(1,"li",1)(2,"mat-icon",2),e._uU(3,"remove_red_eye"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"li",1)(6,"mat-icon",2),e._uU(7,"thumb_up"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"li",1)(10,"mat-icon",2),e._uU(11,"thumb_down"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"li",1)(14,"mat-icon",2),e._uU(15,"insert_comment"),e.qZA(),e._uU(16),e.qZA()()),2&t&&(e.ekj("video-stats-center",n.isCentered),e.xp6(4),e.hij(" ",n.stats.viewCount," "),e.xp6(4),e.hij(" ",n.stats.likeCount," "),e.xp6(4),e.hij(" ",n.stats.dislikeCount," "),e.xp6(4),e.hij(" ",n.stats.commentCount," "))},dependencies:[Z.Hw],styles:[".video-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin:20px 0}.video-stats-center[_ngcontent-%COMP%]{justify-content:center}.video-stats-item[_ngcontent-%COMP%]{display:flex;align-items:center}"]}),i})();function M(i,r){if(1&i&&(e.TgZ(0,"mat-card",1)(1,"div",2),e._UZ(2,"img",3),e.qZA(),e.TgZ(3,"mat-card-content"),e._UZ(4,"app-video-stats",4),e.TgZ(5,"mat-card-title",5),e._uU(6),e.qZA()(),e.TgZ(7,"mat-card-actions")(8,"button",6),e._uU(9,"More"),e.qZA()()()),2&i){const t=e.oxw();e.Q6J("appDateHighlight",t.video.snippet.publishedAt),e.xp6(2),e.Q6J("src",t.video.snippet.thumbnails.medium.url,e.LSH),e.xp6(2),e.Q6J("stats",t.video.statistics),e.xp6(2),e.Oqu(t.video.snippet.title),e.xp6(2),e.MGl("routerLink","detailed/",t.video.id,"")}}let E=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-item"]],inputs:{video:"video"},decls:1,vars:1,consts:[[3,"ngIf"],[1,"search-item",3,"appDateHighlight"],[1,"search-item-thumbnail"],["mat-card-image","","alt","Photo of a Shiba Inu",3,"src"],[3,"stats"],[1,"search-item-title"],["mat-raised-button","","color","accent",3,"routerLink"]],template:function(t,n){1&t&&e.YNc(0,M,10,5,"ng-template",0),2&t&&e.Q6J("ngIf",n.video)},dependencies:[c.O5,A.lW,u.a8,u.dn,u.n5,u.hq,u.G2,h.rH,I,T],styles:[".search-item[_ngcontent-%COMP%]{padding:20px;border-bottom:4px solid black}.search-item-title[_ngcontent-%COMP%]{font-size:16px;line-height:120%}.search-item-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"]}),i})(),Q=(()=>{class i{transform(t,n,s){if(!t)return null;if(!n&&!s)return t;if(n&&s){const l=this.filterByString(t,n);return this.filterByString(l,s)}return this.filterByString(t,n||s)}filterByString(t,n){return t.filter(s=>s.snippet.title.toLowerCase().includes(n))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"searchFilter",type:i,pure:!1}),i})();function w(i,r){if(1&i&&(e.TgZ(0,"li",3),e._UZ(1,"app-search-item",4),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("video",t)}}function x(i,r){1&i&&(e.TgZ(0,"div")(1,"h1"),e._uU(2,"Not found!"),e.qZA()())}function N(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" Error occurred ",e.lcZ(2,1,t.error)," ")}}let U=(()=>{class i{constructor(t){this.youtubeService=t,this.filterQuery=null,this.filterString="",this.videos=[]}ngOnInit(){this.searchQuery$.subscribe(t=>this.getVideos(t))}ngOnChanges(t){t.searchQuery||this.doSort([...this.videos])}getVideos(t){this.youtubeService.getVideos(t).subscribe(n=>(null!==this.error&&(this.error=null),n instanceof Error?this.error=n:(0===n.length&&(this.isNotFound=!0),this.videos=n)))}doSort(t){this.filterQuery?.date&&this.sortByDate(t,this.filterQuery.date),this.filterQuery?.countOfViews&&this.sortByCountOfViews(t,this.filterQuery.countOfViews)}sortByDate(t,n){this.videos=t.sort((s,l)=>{const a=new Date(s.snippet.publishedAt),d=new Date(l.snippet.publishedAt);return"ascending"===n?+d-+a:+a-+d})}sortByCountOfViews(t,n){this.videos=t.sort((s,l)=>{const a=s.statistics.viewCount,d=l.statistics.viewCount;return"ascending"===n?+a-+d:+d-+a})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-results"]],inputs:{searchQuery$:"searchQuery$",filterQuery:"filterQuery",filterString:"filterString"},features:[e.TTD],decls:6,vars:9,consts:[[1,"search-results"],["class","search-results-item",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"search-results-item"],[3,"video"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,w,2,1,"li",1),e.ALo(2,"searchFilter"),e.ALo(3,"async"),e.YNc(4,x,3,0,"div",2),e.YNc(5,N,3,3,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,3,n.videos,e.lcZ(3,7,n.searchQuery$),n.filterString)),e.xp6(3),e.Q6J("ngIf",n.isNotFound),e.xp6(1),e.Q6J("ngIf",n.error))},dependencies:[c.sg,c.O5,E,c.Ov,c.Ts,Q],styles:[".search-results[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px}"]}),i})(),H=(()=>{class i{constructor(){this.filterQuery=null,this.filterString=""}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search"]],inputs:{searchQuery$:"searchQuery$",filterQuery:"filterQuery",filterString:"filterString"},decls:3,vars:3,consts:[[1,"search"],[1,"container"],[3,"searchQuery$","filterQuery","filterString"]],template:function(t,n){1&t&&(e.TgZ(0,"section",0)(1,"div",1),e._UZ(2,"app-search-results",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("searchQuery$",n.searchQuery$)("filterQuery",n.filterQuery)("filterString",n.filterString))},dependencies:[U]}),i})();function L(i,r){if(1&i&&(e._UZ(0,"app-search",1),e.ALo(1,"async"),e.ALo(2,"async")),2&i){const t=e.oxw();e.Q6J("searchQuery$",t.searchQuery$)("filterQuery",e.lcZ(1,3,t.filterQuery$))("filterString",e.lcZ(2,5,t.filterString$))}}let P=(()=>{class i{constructor(t){this.searchService=t,this.searchQuery$=this.searchService.getSearchQuery(),this.filterQuery$=this.searchService.getFilterQuery(),this.filterString$=this.searchService.getFilterString()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-main-page"]],decls:2,vars:3,consts:[[3,"searchQuery$","filterQuery","filterString",4,"ngIf"],[3,"searchQuery$","filterQuery","filterString"]],template:function(t,n){1&t&&(e.YNc(0,L,3,7,"app-search",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",null!==e.lcZ(1,1,n.searchQuery$))},dependencies:[c.O5,H,c.Ov]}),i})();var v=o(9673),V=o(1135);let Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-video-details"]],inputs:{video:"video"},decls:16,vars:11,consts:[[1,"video-details"],[1,"video-image"],["alt","",3,"width","height","src"],[1,"video-info"],[1,"video-info-content"],[3,"isCentered","stats"]],template:function(t,n){1&t&&(e.TgZ(0,"article",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"mat-card",3)(4,"mat-card-title"),e._uU(5),e.qZA(),e.TgZ(6,"mat-card-subtitle"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"mat-card-content",4)(10,"strong"),e._uU(11,"Description:"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA()(),e.TgZ(14,"mat-card-footer"),e._UZ(15,"app-video-stats",5),e.qZA()()()),2&t&&(e.xp6(2),e.s9C("width",n.video.snippet.thumbnails.high.width),e.s9C("height",n.video.snippet.thumbnails.high.height),e.s9C("src",n.video.snippet.thumbnails.high.url,e.LSH),e.xp6(3),e.Oqu(n.video.snippet.title),e.xp6(2),e.Oqu(e.xi3(8,8,n.video.snippet.publishedAt,"fullDate")),e.xp6(6),e.Oqu(n.video.snippet.description),e.xp6(2),e.Q6J("isCentered",!0)("stats",n.video.statistics))},dependencies:[u.a8,u.dn,u.n5,u.$j,u.rt,T,c.uU],styles:[".video-details[_ngcontent-%COMP%]{display:flex}.video-image[_ngcontent-%COMP%]{flex-basis:50%}.video-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.video-info[_ngcontent-%COMP%]{flex-basis:50%;display:flex;flex-direction:column;padding:30px}.video-info-content[_ngcontent-%COMP%]{flex-grow:1}"]}),i})();function $(i,r){if(1&i&&(e._UZ(0,"app-video-details",4),e.ALo(1,"async")),2&i){const t=e.oxw();e.Q6J("video",e.lcZ(1,1,t.video$))}}function B(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"json"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" Error occured: ",e.lcZ(2,1,t.error)," ")}}const F=[{path:"",component:P},{path:`${v.e.DETAILED_INFORMATION_PAGE}/:${v.s.ID}`,component:(()=>{class i{constructor(t,n,s){this.route=t,this.youtubeService=n,this.location=s,this.id=null,this.video$=new V.X(null),this.route.paramMap.subscribe(l=>{this.id=l.get(v.s.ID),this.youtubeService.getVideo(this.id).subscribe(a=>(null!==this.error&&(this.error=null),a instanceof Error?this.error=a:this.video$.next(a)))})}goBack(){this.location.back()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.gz),e.Y36(_),e.Y36(c.Ye))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-detailed-information-page"]],decls:10,vars:4,consts:[[1,"container"],["mat-raised-button","","color","primary","aria-label","Back to previous page",1,"back-btn",3,"click"],[3,"video",4,"ngIf"],[4,"ngIf"],[3,"video"]],template:function(t,n){1&t&&(e.TgZ(0,"main")(1,"section")(2,"div",0)(3,"button",1),e.NdJ("click",function(){return n.goBack()}),e.TgZ(4,"mat-icon"),e._uU(5,"arrow_back"),e.qZA(),e._uU(6," Back "),e.qZA(),e.YNc(7,$,2,3,"app-video-details",2),e.ALo(8,"async"),e.YNc(9,B,3,3,"div",3),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",e.lcZ(8,2,n.video$)),e.xp6(2),e.Q6J("ngIf",n.error))},dependencies:[c.O5,Z.Hw,A.lW,Y,c.Ov,c.Ts],styles:[".back-btn[_ngcontent-%COMP%]{margin:20px 0}"]}),i})()}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(F),h.Bz]}),i})();var j=o(4466);let q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,j.m,J]}),i})()}}]);